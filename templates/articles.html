{% extends "base.html" %}

{% block title %}APEX | Knowledge Hub{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/articles.css') }}">
{% endblock %}

{% block content %}

<header class="page-header">
    <div class="header-pattern"></div>
    <div class="container position-relative z-2">
        <span class="badge bg-info text-dark rounded-pill px-3 py-2 mb-3 shadow fw-bold">
            <i class="fas fa-book-open me-1"></i> Knowledge Base
        </span>
        
        <h1 class="display-4 fw-bold mb-3 text-white">The Knowledge Hub</h1>
        <p class="lead opacity-75 mx-auto text-light" style="max-width: 600px;">
            Share your passion. Articles written by students, for students.
        </p>
    </div>
</header>

<section class="section-padding pt-0 bg-light" style="min-height: 80vh;">
    <div class="container">
        
        <div class="row justify-content-center mb-5 filter-container" data-aos="fade-up">
            <div class="col-auto">
                <div class="filter-box">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="Sciences">Sciences</button> <button class="filter-btn" data-filter="Languages">Languages</button> <button class="filter-btn" data-filter="other">Other</button> </div>
            </div>
        </div>

        <div class="row g-4" id="articles-container">
            {% for article in articles %}
            <div class="col-lg-4 col-md-6 article-item" data-subject="{{ article.subject }}" data-aos="fade-up">
                
                <div class="card h-100 border-0 shadow-sm hover-card">
                    <div class="position-relative overflow-hidden" style="height: 200px;">
                        <img src="{{ url_for('static', filename='/uploads/images/' + article.image)}}" 
                             class="w-100 h-100 object-fit-cover transition-img" 
                             alt="{{ article.title }}">
                        
                        <span class="badge bg-white text-primary position-absolute top-0 start-0 m-3 shadow-sm">
                            {{ article.subject }}
                        </span>
                    </div>

                    <div class="card-body p-4 d-flex flex-column">
                        <div class="d-flex justify-content-between align-items-center mb-2 small text-muted">
                            <span><i class="fas fa-user-edit me-1"></i> {{ article.author }}</span>
                            <span><i class="far fa-clock me-1"></i> {{ article.created_at.strftime('%b %d') }}</span>
                        </div>
                        
                        <h5 class="card-title fw-bold mb-3 text-dark">{{ article.title }}</h5>
                        
                        <p class="card-text text-muted small flex-grow-1">
                            {{ article.summary | truncate(100) }}
                        </p>
                        
                        <a href="{{ url_for('article_detail_dynamic', id=article.id) }}" class="fw-bold text-decoration-none mt-3 text-primary">
                            Read Article <i class="fas fa-arrow-right ms-1"></i>
                        </a>
                    </div>
                </div>

            </div>
            {% else %}
            <div class="col-12 text-center py-5">
                <div class="py-5">
                    <i class="fas fa-pencil-alt fa-3x text-muted opacity-25 mb-3"></i>
                    <h3 class="fw-bold text-secondary">No Articles Yet</h3>
                    <p class="text-muted">Be the first to share your knowledge!</p>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div id="no-results-msg" class="text-center py-5 d-none">
            <h4 class="text-muted">No articles found in this category.</h4>
        </div>

    </div>
</section>

{% block scripts %}
    <script src="{{ url_for('static', filename='js/articles.js') }}"></script>
{% endblock %}
{% endblock %}