{% extends "base.html" %}

{% block title %}Admin | Publish Article{% endblock %}

{% block content %}
<div class="container section-padding">
    <div class="row justify-content-center">
        <div class="col-md-9">
            <div class="card shadow-lg border-0 rounded-4">
                
                <div class="card-header text-white text-center py-4 rounded-top-4" 
                     style="background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);">
                    <h3 class="m-0 fw-bold"><i class="fas fa-pen-nib me-2"></i>Publish New Article</h3>
                </div>
                
                <div class="card-body p-5">
                    
                    <form action="{{ url_for('add_article') }}" method="POST" enctype="multipart/form-data">
                         
                        <div class="mb-4">
                            <label class="form-label fw-bold">Article Title</label>
                            <input type="text" name="title" class="form-control rounded-3" placeholder="Ex: The Future of AI in Education" required>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label class="form-label fw-bold">Author Name</label>
                                <input type="text" name="author" class="form-control rounded-3" placeholder="Writer's Name" required>
                            </div>
                            <div class="col-md-6 mb-4">
                                <label class="form-label fw-bold">Subject / Branch</label>
                                <select name="subject" class="form-select rounded-3" required>
                                    <option value="" selected disabled>Select your Branch...</option>
                                    <option value="Mathematics">Mathématiques (Math)</option>
                                    <option value="Physics & Chemistry">Physique-Chimie (PC)</option>
                                    <option value="SVT">Sciences de la Vie et de la Terre (SVT)</option>
                                    <option value="Sport">Education Physique (Sport)</option>
                                    <option value="H&g">Histoire et géographie (H&g)</option>
                                    <option value="Primaire">Enseignement Primaire</option>
                                    <option value="Arabe">Langue Arabe</option>
                                    <option value="Francais">Langue Française</option>
                                    <option value="Anglais">Langue Anglaise</option>
                                    <option value="Education_islamique">Éducation islamique</option>
                                </select>
                                <small class="text-muted">Select carefully for filtering to work.</small>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">Cover Image</label>
                            <input type="file" name="article_image" class="form-control rounded-3" accept="image/*" required>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">Summary (Short Description)</label>
                            <textarea name="summary" class="form-control rounded-3" rows="2" placeholder="Appears on the main list (max 2 sentences)..." required></textarea>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">Full Article Content</label>
                            <textarea name="content" class="form-control"></textarea>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg rounded-pill fw-bold shadow-sm">
                                <i class="fas fa-upload me-2"></i> Publish Article
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.tiny.cloud/1/n8rmskjt0bjpc15y1txddgo33y2edf3dbzi2d4vircwbwfbw/tinymce/7/tinymce.min.js" referrerpolicy="origin"></script>
<script>
  tinymce.init({
    selector: 'textarea[name="content"]',
    height: 500,
    menubar: false,
    plugins: 'advlist autolink lists link image charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table help wordcount',
    toolbar: 'undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright | bullist numlist | removeformat | help',
    content_style: 'body { font-family:Poppins,sans-serif; font-size:16px; line-height:1.6; color:#333; }'
  });
</script>
{% endblock %}