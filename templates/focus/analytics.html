{% extends "focus/base.html" %}
{% block focus_content %}
<div class="fade-in space-y-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="glass-panel p-6 rounded-2xl bg-white relative overflow-hidden group hover:-translate-y-1 transition duration-300">
            <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition">
                <i class="fa-solid fa-clock text-6xl text-brand-600"></i>
            </div>
            <p class="text-sm font-bold text-slate-400 uppercase tracking-wide">Focus Time</p>
            <h3 class="text-4xl font-extrabold text-slate-900 mt-2">{{ total_hours }}<span class="text-lg text-slate-400 font-medium ml-1">hrs</span></h3>
            <p class="text-xs text-green-500 font-bold mt-2 flex items-center gap-1"><i class="fa-solid fa-arrow-trend-up"></i> Keep it up!</p>
        </div>
        
        <div class="glass-panel p-6 rounded-2xl bg-white relative overflow-hidden group hover:-translate-y-1 transition duration-300">
            <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition">
                <i class="fa-solid fa-layer-group text-6xl text-brand-600"></i>
            </div>
            <p class="text-sm font-bold text-slate-400 uppercase tracking-wide">Current Level</p>
            <h3 class="text-4xl font-extrabold text-brand-700 mt-2">{{ stats.level }}</h3>
            <p class="text-xs text-slate-400 mt-2 font-medium">{{ stats.xp }} Total XP Earned</p>
        </div>
        
        <div class="glass-panel p-6 rounded-2xl bg-white relative overflow-hidden group hover:-translate-y-1 transition duration-300">
            <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition">
                <i class="fa-solid fa-bullseye text-6xl text-accent"></i>
            </div>
            <p class="text-sm font-bold text-slate-400 uppercase tracking-wide">Productivity</p>
            <h3 class="text-4xl font-extrabold text-accent mt-2">A+</h3>
            <p class="text-xs text-slate-400 mt-2">Based on task completion</p>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div class="glass-panel p-8 rounded-2xl bg-white">
            <h3 class="font-bold text-slate-900 mb-6 font-heading text-lg">Subject Distribution</h3>
            <div class="relative h-64 w-full flex justify-center">
                <canvas id="subjectChart"></canvas>
            </div>
        </div>
        
        <div class="glass-panel p-8 rounded-2xl bg-gradient-to-br from-brand-600 to-brand-800 text-white flex flex-col justify-center items-center text-center shadow-lg shadow-blue-200">
            <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-white mb-4 backdrop-blur-sm">
                <i class="fa-solid fa-lightbulb text-2xl"></i>
            </div>
            <h3 class="font-bold text-xl mb-3 font-heading">Pro Tip</h3>
            <p class="text-blue-100 text-sm leading-relaxed max-w-sm">"Focus on one task at a time. Multitasking reduces efficiency by 40%. Use the Pomodoro timer to stay locked in."</p>
        </div>
    </div>
</div>

<script>
    const ctx = document.getElementById('subjectChart').getContext('2d');
    new Chart(ctx, {
    type: 'doughnut',
        data: {
            // Safe way to load data:
            labels: {{ chart_labels | tojson }},
            datasets: [{
                data: {{ chart_data | tojson }},
                backgroundColor: ['#1E40AF', '#F59E0B', '#3B82F6', '#64748B', '#10B981'],
                borderWidth: 0,
                hoverOffset: 4
            }]
        },
        options: { 
            responsive: true, 
            maintainAspectRatio: false, 
            plugins: { 
                legend: { position: 'right', labels: { font: { family: 'Poppins' } } } 
            } 
        }
    });
</script>
{% endblock %}